# 安装脚本run.sh使用指南

本文档介绍了如何使用本构建脚本run.sh，便于高效地进行编译、调试和清理工作。

## 基本用法

在终端进入软件的根目录比如Pikachu或者PiTorch，运行：

```bash
bash install.sh [选项]
```

## 支持的选项

- `-g`  
  启用调试信息（等价于 `-g` 参数）。编译出的可执行文件将包含调试符号，便于调试。

- `-o <0|1|2|3>`  
  设定优化级别。可选参数为 0、1、2 或 3，对应 `-O0` 到 `-O3` 优化等级。例如 `-o 2` 等价于 `-O2`。

- `-c`  
  在构建前先清理（clean）一次，删除旧的编译文件，再进行编译。

- `-C`  
  仅清理（clean），不做编译。执行后直接退出。

- `-h`  
  显示帮助信息（usage），并退出。

## 参数组合说明

- 可同时指定 `-g` 和 `-o`，例如 `-g -o 2`，则会以带调试信息和二级优化的方式编译。
- 若仅需清理文件而不编译，使用 `-C`。
- 若需在编译前清理一次，使用 `-c`。

## 示例

1. **普通编译（无调试、默认优化等级 O0）**  
   ```bash
   bash install.sh
   ```

2. **带调试信息编译**  
   ```bash
   bash install.sh -g
   ```

3. **指定优化等级编译（O2）**  
   ```bash
   bash install.sh -o 2
   ```

4. **同时调试与优化（O3）**  
   ```bash
   bash install.sh -g -o 3
   ```

5. **编译前先清理**  
   ```bash
   bash install.sh -c
   ```

6. **只清理，不编译**  
   ```bash
   bash install.sh -C
   ```

7. **查看帮助**  
   ```bash
   bash install.sh -h
   ```

## 注意事项

- 本脚本会自动切换到 `tools` 和 `extern/tools` 目录进行编译操作。
- 如果目录切换失败或 make 失败，会有明确错误提示。
- 优化级别参数只接受 0、1、2、3，其他数值会报错。
- 可根据实际项目需要完善构建逻辑与目标。

---

如需进一步自定义脚本行为，请参考脚本内注释或联系维护者。
